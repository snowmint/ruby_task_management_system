<% @user = User.find(session[:user_id]) %>
<div class="container">
  <br/>
  <h1><%= raw(t('hello_world')) %> <%= @user.username %></h1>
  <% @tasks = Task.where(user_id: session[:user_id]).page(params[:page]).per(5)%>
  <%
  $status_list = ["Pending", "In Progress", "Complete"]
  $priority_list = ["Urgent", "Highest", "High", "Normal", "Low", "Lowest"]
  %>
  <div class="table-responsive">
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th> <% Task.human_attribute_name("tasks.user_id") %> </th>
          <th> <%= Task.human_attribute_name("tasks.task_name") %> </th>
          <th> <%= Task.human_attribute_name("tasks.content") %> </th>
          <th> <%= Task.human_attribute_name("tasks.start_time") %> </th>
          <th> <%= Task.human_attribute_name("tasks.end_time") %> </th>
          <th> <%= Task.human_attribute_name("tasks.priority") %> </th>
          <th> <%= Task.human_attribute_name("tasks.status") %> </th>
          <th> <%= Task.human_attribute_name("tasks.create_time") %> </th>
          <th> <%= Task.human_attribute_name("tasks.handle") %> </th>
        </tr>
        </thead>
        <tbody>
        <% @tasks.each do |task| %>
        <tr>
          <td><% task.user_id%></td>
          <td><%= task.task_name %></td>
          <td><%= task.content %></td>
          <td><%= task.start_time %></td>
          <td><%= task.end_time %></td>
          <td><%= $priority_list[task.priority] %></td>
          <td><%= $status_list[task.status] %></td>
          <td><%= task.created_at %></td>
          <td>
          <%= link_to raw(t('task_relate.edit_task')), edit_task_path(task) %>
          <%= link_to raw(t('task_relate.delete_task')), edit_task_path(task), method: "delete", data: { confirm: "Comfirm to delete it" } %>
          </td>
        </tr>
      <% end %>
      </tbody>
    </table>
    <div sytle="margin: auto;">
      <%= paginate @tasks %>
    </div>
  </div>
</div>